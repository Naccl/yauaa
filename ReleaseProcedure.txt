The maven release plugin turned out to be too hard to handle.
So we do it manually.

# Ensure we have all upstream updates (like patches from Renovate)
git pull

# Ensure all has been committed
git status

# Update the top of the CHANGELOG.md and website frontpage
vim CHANGELOG.md documentation/content/_index.md
git commit -M"Updated CHANGELOG and website before release" CHANGELOG.md documentation/content/_index.md

# Prepare the release
mvn release:prepare

# These two profiles are defined in ~/.m2/settings.xml
mvn release:perform -PdeployToSonatype

#
# Now check SONATYPE
#

git push
git push origin v${RELEASEVERSION}

# Publish the docker image
docker push nielsbasjes/yauaa:${RELEASEVERSION}
docker push nielsbasjes/yauaa:latest

Upload logstash gem to github.com


#######################

# Publishing a SNAPSHOT version
mvn clean deploy -PpackageForRelease -PdeployToSonatype

